<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>强队落后预测增强版</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  label, button, input { display: block; width: 100%; margin: 5px 0; font-size: 1rem; }
  #result { padding: 15px; margin-top: 20px; background: #f0f0f0; border-radius: 6px; }
  .strong-alert { color: red; font-weight: bold; }
</style>
</head>
<body>
<h2>强队落后实时预测（增强版）</h2>

<label>主队得分 <input type="number" id="homeScore" value="0" min="0"/></label>
<label>客队得分 <input type="number" id="awayScore" value="1" min="0"/></label>

<label>主队预赛赔率/评级（小 = 强队）<input type="number" id="homeOdds" value="1.8" step="0.01"/></label>
<label>客队预赛赔率/评级<input type="number" id="awayOdds" value="2.5" step="0.01"/></label>

<label>主队进攻次数 <input type="number" id="homeAttacks" value="120" min="0"/></label>
<label>客队进攻次数 <input type="number" id="awayAttacks" value="51" min="0"/></label>

<label>主队危险进攻 <input type="number" id="homeDanger" value="59" min="0"/></label>
<label>客队危险进攻 <input type="number" id="awayDanger" value="14" min="0"/></label>

<label>主队控球率（%）<input type="number" id="homePossession" value="56" min="0" max="100"/></label>
<label>客队控球率（%）<input type="number" id="awayPossession" value="44" min="0" max="100"/></label>

<label>主队射正 <input type="number" id="homeShotsOn" value="5" min="0"/></label>
<label>客队射正 <input type="number" id="awayShotsOn" value="1" min="0"/></label>

<label>主队射偏 <input type="number" id="homeShotsOff" value="5" min="0"/></label>
<label>客队射偏 <input type="number" id="awayShotsOff" value="1" min="0"/></label>

<button onclick="predict()">预测翻盘概率</button>

<div id="result"></div>

<script>
function predict() {
  const homeScore = +document.getElementById('homeScore').value;
  const awayScore = +document.getElementById('awayScore').value;
  const homeOdds = +document.getElementById('homeOdds').value;
  const awayOdds = +document.getElementById('awayOdds').value;
  if (homeScore >= awayScore) {
    document.getElementById('result').innerHTML = '<b>主队未落后，无需翻盘模型。</b>';
    return;
  }
  const isHomeStrong = homeOdds < awayOdds;
  const stronger = isHomeStrong ? '主队是强队（需要翻盘）' : '主队是弱队（落后属于正常）';
  
  const ha = +document.getElementById('homeAttacks').value, aa = +document.getElementById('awayAttacks').value;
  const hd = +document.getElementById('homeDanger').value, ad = +document.getElementById('awayDanger').value;
  const hp = +document.getElementById('homePossession').value, ap = +document.getElementById('awayPossession').value;
  const hso = +document.getElementById('homeShotsOn').value, aso = +document.getElementById('awayShotsOn').value;
  const hsf = +document.getElementById('homeShotsOff').value, asf = +document.getElementById('awayShotsOff').value;

  // 组合得分模型
  let score = (ha-aa)*0.2 + (hd-ad)*0.25 + (hp-ap)*0.15 + (hso-aso)*0.25 + (hsf-asf)*0.15;
  const prob = 1/(1+Math.exp(-score)); 
  const pct = (prob*100).toFixed(1);

  let advice = '';
  if (isHomeStrong && prob > 0.6) advice = '强队落后，翻盘可能性高，建议关注';
  else if (isHomeStrong && prob > 0.4) advice = '强队落后，但翻盘可能仅中等';
  else if (isHomeStrong) advice = '强队落后，翻盘难度较高';
  else advice = '弱队落后，暂不建议博翻盘';
  
  document.getElementById('result').innerHTML = `
    <p class="strong-alert">${stronger}</p>
    <p>翻盘概率估算：<b>${pct}%</b></p>
    <p>策略建议：${advice}</p>`;
}
</script>
</body>
</html>
